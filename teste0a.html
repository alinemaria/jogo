<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Teste</title>

        <script src="jogo.js"></script>

        <script>
            var x = 1;
            var y = 0;
            var tiles_livres =
            [0,1,16,17,32,33,48,49,65,80,81,96,97,112,113,6,7,22,23,38,39,52,53];
                      
            function roda()
            {
                inicializa (carregou, processa);
                carrega_imagem("tiles.png");
                carrega_mapa("Fase01.tmx");
                carrega_imagem("p1.png")
            }
            
            function carregou(arqs)
            {
                if (arqs == 2)
                    pronto();
            }

            function processa()
            {
                var x_ant= x;
                var y_ant= y;


                if (teclado.left)
                    x = x-1;
                else if (teclado.right)
                    x = x+1;    

                if (teclado.up)
                    y = y-1;
                else if (teclado.down)
                    y = y+1; 
                    
                if (x < 0) x = 0;       
                if (x > 19) x = 19;       
                if (y < 0) y = 0;       
                if (y > 14) y = 14; 
                

       
                var img = mapa_get_tile(x,y);
                    if (tiles_livres.indexOf(img) == -1){
                        x= x_ant;
                        y= y_ant;                        
                        }
                        
                desenha_mapa();
                desenha_imagem("p1.png",x,y);

               
            }
        </script>

    </head>
    

    <body onload="roda()">

        <canvas id="tela" width="640" height="480"></canvas>
    </body>
</html>
